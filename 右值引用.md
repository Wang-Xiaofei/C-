---
UID: 2403071636
link: ""
cssclasses: 
tags:
  - c加/引用
  - 右值引用
---

## 1 定义

右值引用是 C++11 引入的一种**新的引用类型**，用于**支持移动语义和完美转发**。右值引用使用双引号 `&&` 表示，与传统的左值引用相比，**右值引用可以绑定到临时对象（即右值）**，而左值引用只能绑定到具名对象（即左值）。右值引用主要用于实现**移动语义**，允许将资源（如内存、文件句柄等）从一个对象“窃取”到另一个对象，而不需要进行深层拷贝，从而提高了性能和效率。右值引用还在模板编程中起到重要作用，支持**完美转发**，即将参数以原始形式传递给下层函数，避免了额外的拷贝和转换。



在 C++ 或者 C 语言中，一个表达式（可以是字面量、变量、对象、函数的返回值等）根据其使用场景不同，分为左值表达式和右值表达式。确切的说 C++ 中左值和右值的概念是从 C 语言继承过来的。  

> 值得一提的是，左值的英文简写为“lvalue”，右值的英文简写为“rvalue”。很多人认为它们分别是"left value"、"right value" 的缩写，其实不然。lvalue 是“loactor value”的缩写，可意为存储在内存中、有明确存储地址（可寻址）的数据，而 rvalue 译为 "read value"，指的是那些可以提供数据值的数据（不一定可以寻址，例如存储于寄存器中的数据）。

#### 1.1.1 如何判断左右值

通常情况下，判断某个表达式是左值还是右值，最常用的有以下 2 种方法。  
  
1) 可位于赋值号（=）左侧的表达式就是左值；反之，只能位于赋值号右侧的表达式就是右值。举个例子：


```cpp
int a = 5;  
5 = a; //错误，5 不能为左值
```


其中，变量 a 就是一个左值，而字面量 5 就是一个右值。值得一提的是，C++ 中的左值也可以当做右值使用，例如：

```cpp
int b = 10; // b 是一个左值  
a = b; // a、b 都是左值，只不过将 b 可以当做右值使用
```


  
2) 有名称的、可以获取到存储地址的表达式即为左值；反之则是右值。  
  
以上面定义的变量 a、b 为例，a 和 b 是变量名，且通过 &a 和 &b 可以获得他们的存储地址，因此 a 和 b 都是左值；反之，字面量 5、10，它们既没有名称，也无法获取其存储地址（字面量通常存储在寄存器中，或者和代码存储在一起），因此 5、10 都是右值。 

> 注意，以上 2 种判定方法只适用于大部分场景。由于本节主要讲解右值引用，因此这里适可而止，不再对 C++ 左值和右值做深度剖析，感兴趣的读者可自行研究。


参考：[C++11右值引用（一看即懂）](https://c.biancheng.net/view/7829.html)


![[C++知识点/右值引用与左值引用的区别|右值引用与左值引用的区别]]


## 2 应用


### 2.1 移动语义
![[移动语义]]



### 2.2 完美转发

![[完美转发]]

















