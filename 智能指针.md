---
UID: 2403071704
link: ""
cssclasses: 
tags:
  - C加/智能指针
---

## 1 定义

所谓智能指针，可以从字面上理解为“智能”的指针。具体来讲，智能指针和普通指针的用法是相似的，不同之处在于，**智能指针可以在适当时机自动释放分配的内存**。也就是说，使用智能指针可以很好地避免“忘记释放内存而导致内存泄漏”问题出现。由此可见，C++ 也逐渐开始支持垃圾回收机制了，尽管目前支持程度还有限。

> **C++ 智能指针底层是采用引用计数的方式实现的**。简单的理解，智能指针在申请堆内存空间的同时，会为其配备一个整形值（初始值为 1），每当有新对象使用此堆内存时，该整形值 +1；反之，每当使用此堆内存的对象被释放时，该整形值减 1。当堆空间对应的整形值为 0 时，即表明不再有对象使用它，该堆空间就会被释放掉。



## 2 auto_ptr



>[! note]- auto_ptr
> ![[auto_ptr智能指针]]

## 3 shared_ptr



>[! note]- shared_ptr
> ![[shared_ptr智能指针]]


## 4 unique_ptr

unique_ptr“独占”所指向的对象。

>[! note]- unique_ptr智能指针
> ![[unique_ptr智能指针]]

## 5 weak_ptr

weak_ptr 设计的目的是为配合` shared_pt`r 而引入的一种智能指针来协助` shared_ptr` 工作, 它只可以从一个 shared_ptr 或另一个 weak_ptr 对象构造, 它的构造和析构不会引起引用记数的增加或减少。 同时weak_ptr 没有重载`*`和`->`但可以使用 lock 获得一个可用的 shared_ptr 对象。


>[! note]- weak_ptr
> ![[weak_ptr智能指针]]
